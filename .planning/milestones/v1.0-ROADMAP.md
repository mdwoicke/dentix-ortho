# Milestone v1.0: Call Trace Analyzer

**Status:** SHIPPED 2026-02-02
**Phases:** 1-6
**Total Plans:** 14

## Overview

Build an end-to-end call trace analysis system that starts with deterministic trace parsing and intent extraction, layers on Cloud9 fulfillment verification, surfaces results through a dedicated UI, adds LLM-powered diagnostic agents for root cause analysis, enables replay-based regression detection, and closes the loop with automated monitoring. Each phase delivers standalone value while building toward the full automated diagnosis pipeline.

## Phases

### Phase 1: Trace Foundation
**Goal**: User can pull any call trace and see structured intent classification with tool call timeline
**Depends on**: Nothing (first phase)
**Requirements**: TRACE-01, TRACE-02, TRACE-03, TRACE-04, INTENT-01, INTENT-02, INTENT-03, INTENT-04
**Plans**: 3 plans

- [x] 01-01-PLAN.md -- Caller intent classifier and tool sequence mapper services
- [x] 01-02-PLAN.md -- Database schema for analysis cache and verify existing trace infrastructure
- [x] 01-03-PLAN.md -- Trace analysis API endpoint (orchestration)

### Phase 2: Fulfillment Verification
**Goal**: User can see whether a call actually achieved its goal by comparing trace claims against live Cloud9 records
**Depends on**: Phase 1
**Requirements**: VERIFY-01, VERIFY-02, VERIFY-03, VERIFY-04, VERIFY-05
**Plans**: 2 plans

- [x] 02-01-PLAN.md -- Cloud9 verification service and trace analysis endpoint extension
- [x] 02-02-PLAN.md -- Multi-child booking verification, per-child verdict logic, and smoke test

### Phase 3: Trace Analysis UI
**Goal**: User can interactively investigate any call trace through a dedicated page in the App UI
**Depends on**: Phase 1 (Phase 2 data displayed when available)
**Requirements**: UI-01, UI-02, UI-03, UI-04
**Plans**: 2 plans

- [x] 03-01-PLAN.md -- Trace analysis page with search, tree, transcript, and intent classification
- [x] 03-02-PLAN.md -- Verdict display, diagnostic report view, and manual trigger buttons

### Phase 4: Expert Agents & Diagnostics
**Goal**: When a call fails, system automatically identifies root cause across the full stack and produces a fix proposal
**Depends on**: Phase 1, Phase 2
**Requirements**: EXPERT-01..05, DIAG-01..05
**Plans**: 3 plans

- [x] 04-01-PLAN.md -- Expert agent framework with 4 domain agents and deploy events table
- [x] 04-02-PLAN.md -- Diagnostic orchestrator, routing logic, and standalone expert endpoints
- [x] 04-03-PLAN.md -- PR-ready unified diffs and deploy event recording

### Phase 5: Replay
**Goal**: User can reproduce a failed call scenario to verify whether a fix resolves it
**Depends on**: Phase 1
**Requirements**: REPLAY-01, REPLAY-02, REPLAY-03
**Plans**: 2 plans

- [x] 05-01-PLAN.md -- Mock harness generation and mock replay mode for replayService
- [x] 05-02-PLAN.md -- Flowise end-to-end replay and Cloud9 direct API testing

### Phase 6: Automated Monitoring
**Goal**: Every completed call is automatically checked and failures trigger the full diagnostic pipeline
**Depends on**: Phase 1, Phase 2, Phase 4
**Requirements**: MON-01, MON-02, MON-03
**Plans**: 2 plans

- [x] 06-01-PLAN.md -- MonitoringService pipeline with auto-analysis and diagnostic triggering
- [x] 06-02-PLAN.md -- Monitoring results API with filtering and CallTracePage filter UI

## Progress

| Phase | Plans Complete | Status | Completed |
|-------|---------------|--------|-----------|
| 1. Trace Foundation | 3/3 | Complete | 2026-02-02 |
| 2. Fulfillment Verification | 2/2 | Complete | 2026-02-02 |
| 3. Trace Analysis UI | 2/2 | Complete | 2026-02-02 |
| 4. Expert Agents & Diagnostics | 3/3 | Complete | 2026-02-02 |
| 5. Replay | 2/2 | Complete | 2026-02-02 |
| 6. Automated Monitoring | 2/2 | Complete | 2026-02-02 |

## Milestone Summary

**Key Decisions:**
- Transcript-based intent parsing via Claude 3.5 Haiku
- Serial Cloud9 API calls with 200ms delay (rate limiting)
- Sequential expert agent execution (avoid LLM rate limits)
- Dynamic import() for lazy loading heavy services
- 5-minute monitoring interval via heartbeat timestamp check
- Diagnostics capped at 3 per cycle

**Issues Resolved:**
- None — clean execution across all 6 phases

**Issues Deferred:**
- Correlation ID propagation through Node-RED (noted but not blocking)

**Technical Debt Incurred:**
- None — zero TODOs, stubs, or placeholders in verification reports

---
*Archived: 2026-02-02 as part of v1.0 milestone completion*
*For current project status, see .planning/ROADMAP.md*
